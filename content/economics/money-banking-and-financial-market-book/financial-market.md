---
title: "第二篇 金融市场"
layout: page
date: 2018-12-30

---

[TOC]

## 理解利率

### 现值(present value)
现值(折现值) 是为了未来的现金流量折算成当前的现金价值,从而可以进行比较。

第n期到期的现金流CF折现的现值PV为

$$
PV = \frac{CF}{(1+i)^n}
$$

i是利率/收益率等。

直观解释: n年后给你CF元, 市场利率为i,那么这笔钱的在现在的价值就是现值PV。


### 四种信用市场工具
- 普通贷款, 到期偿还本息: 普通一次性贷款
- 固定支付贷款, 定期偿付部分本金和利息: 例如房贷, 分期贷
- 息票债券, 每期偿还利息, 到期偿还票债券面值的债券: 国债
- 贴现发行的债券, 没有利息, 到期偿还票债券面值的债券。所以一般要以低于票面价格卖出, 一般的公司债券都是这样

### 到期收益率
将债务工具未来所有的现金流CF按照收益率 i 折算的现值如果等于价格,那么i就是到期收益率。

- 一次性借款N元,一年后偿付本息, 假设利息为i, 那么收益率就是i
- 如果分两年, 方案一,每年都按照利率i偿还利息,到期后偿还本金; 方案二,到期后一次性安年利率i还本付息, 这两种收益率还是i吗? 显然第一年的利息如果存银行或搞理财, 第二年还可以获得额外的收益, 但是第二年的利息并没有这个优势,这说明虽然每年的利率是一样的, 但是第一种方案收益率应该高一些, 这正是因为现金的时间价值不一样。在这个例子中, 假设每年的收益率为r(与利率i区分), 对于方案一,第一年的利息现值为 $( i N / (1+r) )$, 第二年的利息现值为 $( i N / (1+r)^2 )$,确实不一样, 第二年的本金的现值为 $( N/(1+r)^2 )$, 根据等式,未来全部的现金流的现值等于价格(也就是本金), 那么有
  
  $$
    N = \frac{i N }{(1+r)} + \frac{i N} {(1+r)^2} + \frac{N}{(1+r)^2} 
  $$
    
  所以到期收益率满足 
  $$
   1 = \frac{i} { 1+r } + \frac{1+i}{(1+r)^2 }
  $$
  可以通过解这个方程解出到期收益率 $(r = i)$, 也就是说 **到期收益率是把债务等效于按照每年付息, 到期偿还本金,这种还款方式的利率**!!再来看第二种方案, 很容易列出方程
  $$
  N = \frac{2i N} {(1+r)^2} + \frac{N}{(1+r)^2} 
  $$
  解出
  $$
  r = \sqrt{1 + 2i} - 1 \approx i - i^2 < i
  $$
  实际收益率是比年利率i小的。
- 等额本息, 到期收益率案例。以房贷为例, 100万元本金LV借款, 假设月利率为i, 按照每月等额本息方式还款n年, 每月还钱金额FP计算。
  $$
  LV = \frac{FP}{1+i} + \frac{FP}{(1+i)^2} + \frac{FP}{(1+i)^3} + ... + \frac{FP}{(1+i)^{12n}}
  $$
  所以
  $$
  FP = LV / (\frac{1}{1+i} + \frac{1}{(1+i)^2} + \frac{1}{(1+i)^3} + ... + \frac{1}{(1+i)^{12n}})
  $$
  以LV=1000000元为例,年利率为4.9%,那么月利率i=0.40833%,那么可以就算出 FP=5307元

```python
def calc_fp(lv, i, n):
  r = sum(1/pow(1 + i, k) for k in range(1, n+1))
  return lv / r

if __name__ == '__main__':
  print calc_fp(726000, 0.0325/12, 12*30) # 实际值 3159.60
  print calc_fp(940000, 0.0539/12, 12*30) # 实际值 5272.48
```
  
  假设以等额本金方式还款, 那么每月还款金额很好算, 就是等额本金+当月的剩余借款产生的利息。
  房贷计算参考[loan_calc.py](https://github.com/tracholar/wiki/blob/master/src/ecomic/loan_calc.py)。
- 息票债券, 用P表示息票现期价格, C表示每期支付利息, F为债券面值,也就是到期后支付的金额,那么有
$$
P = \frac{C}{1+i} + \frac{C}{(1+i)^2} + \frac{C}{(1+i)^3} + ... + \frac{C}{(1+i)^{n}} + \frac{F}{(1+i)^{n}}
$$
C与F的比值也是息票利率, 如果息票现期价格P等于面值F,那么息票相当于每期还息到期还本的借款, 到期收益率就是票面利率。实际中,价格P往往和面值F不相等,如果价格P低于面值,那么到期收益率显然高于票面利率。这说明, **息票价格P与到期收益率负相关**!!
- 永续债券, 就是指n等于无穷的息票债券, 类似于固定股息的股票。有 
$$
P = \frac{C}{i}
$$
可以看到, 价格跟利率成反比!! 这也相当于一个简单的股票价格模型, 当市场无风险利率升高了, 股东要求的到期收益率也会相应提高, 也就是i会提高(这种情况下容易验证到期收益率就等于票面利率,你可以认为F=P,实际上在n无限大时,只要F为有限值,都没有影响), 那么股票价格就会下跌, 这样才能让当下的买家获得相应的收益率,这样交易才能完成!
- 当利率下降到很低的时候, 国库券/银行利率可能出现负利率!!因为大额的资金持有现金不方便。

### 回报率
- 对任何证券来说, 回报率(R)既包含了利率(ic)也包括价格变动率g(也叫资本利得率)!
$$
R = i_c + g
$$
不分红的股票就只有资本利得率g, 价格不变的债券就只有利率。由于价格波动可能为负的,这会导致回报率为负值!!
- 利率风险: 债券期限越长,价格变动幅度受利率影响会越大,这会加大长期债券的投资风险! 股票可以认为就是一种无限期的债券!
- 距离到期日期限 和 持有期限 相同的债券是没有利率风险的。因为它的回报只有利息,到期时的价格就是约定的票面价格,也就是当初买的价格!

### 名义利率与实际利率
实际利率是指从名义利率(票面利率)扣除通货膨胀之后的利率。费雪方程(Fisher Equation)

$$
i (\text{名义利率}) = i_r (\text{实际利率}) + \pi^e (通货膨胀)
$$

据此,我们来测算一下2008年-2018年10年期间, 5年期定期存款的实际利率, 2008年时3年以上定期存款的基准利率为4.14%, 10年间年均通货膨胀率估计值约为7%(用M2增长率 - GDP增长率),这表明我们的名义利率为 -2.86%!!! 这跟我们直观感受一致, 「把钱存银行, 越存越没钱!」

| 时间 | M2同比 | 国内生产总值-同比 | 通货膨胀率 |
| ------ | ------ | ----------------- | ---------- |
| 2017年 | 8.20%  | 6.90%             | 1.30%      |
| 2016年 | 11.30% | 6.70%             | 4.60%      |
| 2015年 | 13.30% | 6.90%             | 6.40%      |
| 2014年 | 12.20% | 7.30%             | 4.90%      |
| 2013年 | 13.60% | 7.80%             | 5.80%      |
| 2012年 | 13.80% | 7.90%             | 5.90%      |
| 2011年 | 13.60% | 9.50%             | 4.10%      |
| 2010年 | 19.70% | 10.60%            | 9.10%      |
| 2009年 | 27.68% | 9.40%             | 18.28%     |
| 2008年 | 17.82% | 9.70%             | 8.12%      |
| 平均 | 15.12% | 8.27%             | 6.85%      |

数据来源: <http://data.stats.gov.cn/easyquery.htm?cn=C01>
注意事项: GDP同比增速是指GDP平减指数, 如果你根据GDP实际值算会高不少, 要用国家公布的GDP增长数据, 那个数据是已经扣除了物价之后的。
参考 [中国近10年的通货膨胀率大概在多少？ - 江枫渔火的回答 - 知乎](https://www.zhihu.com/question/22923480/answer/340548742)
问题: 为什么算通货膨胀也要用扣除物价指数之后的GDP增长率?

名义利率无法直接观测到,1997年,美国财政部发行了**指数化债券TIPS(全称通货膨胀保值债券)**,债券的利率按照物价水平变化进行调整。

## 利率行为

