<!DOCTYPE HTML>
<html>
    <head>
        <link rel="Stylesheet" type="text/css" href="/wiki/static/css/style.css">
        <link rel="Stylesheet" type="text/css" href="/wiki/static/css/tango.css">
        <link rel="Stylesheet" type="text/css" href="/wiki/static/plugin/tipuesearch/css/tipuesearch.css">
        <link rel="stylesheet" href="/wiki/static/plugin/tipuesearch/css/normalize.css">
        <link rel="stylesheet" href="/wiki/static/plugin/tipuesearch/css/tipuesearch.css">
        <link rel="shortcut icon" href="/wiki/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/wiki/favicon.ico" type="image/x-icon">
        <title>Notification Volume Control and Optimization System at Pinterest - Tracholar的个人wiki</title>
        <meta name="keywords" content="technology, machine learning, data mining, economics, accounting"/>
        <meta name="description" content="A wiki website of tracholar when I learned new knowledgy and technics."/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width" />

        <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {inlineMath: [['$(',')$'], ['\\(','\\)'], ['$', '$']]}
        });
        </script>
        <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script src="https://code.jquery.com/jquery-2.2.4.min.js"
            integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
            crossorigin="anonymous"></script>

        <!-- Google Adsense -->
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-78529611-1', 'auto');
          ga('send', 'pageview');


            // Google Adsense Auto AD
            (adsbygoogle = window.adsbygoogle || []).push({});
            /*
             (adsbygoogle = window.adsbygoogle || []).push({
                  google_ad_client: "ca-pub-6300557868920774",
                  enable_page_level_ads: true
             });
             */
        </script>
    </head>

    <body>
        <div id="container">
            <div id="google-search" style="width:200px; float:right; margin: 20px 0;">
                <form action="//cse.google.com/cse" method="get" id="search-form">
                    <input type="hidden" name="cx" value="015970462532790426975:gqlen38ywus"/>
                    <input type="text" name="q"  style="line-height:20px; padding:4px;" placeholder="站内搜索"/>
                    <svg width="13" height="13" viewBox="0 0 13 13" style="position:relative; left: -20px;" onclick="document.getElementById('search-form').submit()">
                        <title>搜索</title>
                        <path d="m4.8495 7.8226c0.82666 0 1.5262-0.29146 2.0985-0.87438 0.57232-0.58292 0.86378-1.2877 0.87438-2.1144 0.010599-0.82666-0.28086-1.5262-0.87438-2.0985-0.59352-0.57232-1.293-0.86378-2.0985-0.87438-0.8055-0.010599-1.5103 0.28086-2.1144 0.87438-0.60414 0.59352-0.8956 1.293-0.87438 2.0985 0.021197 0.8055 0.31266 1.5103 0.87438 2.1144 0.56172 0.60414 1.2665 0.8956 2.1144 0.87438zm4.4695 0.2115 3.681 3.6819-1.259 1.284-3.6817-3.7 0.0019784-0.69479-0.090043-0.098846c-0.87973 0.76087-1.92 1.1413-3.1207 1.1413-1.3553 0-2.5025-0.46363-3.4417-1.3909s-1.4088-2.0686-1.4088-3.4239c0-1.3553 0.4696-2.4966 1.4088-3.4239 0.9392-0.92727 2.0864-1.3969 3.4417-1.4088 1.3553-0.011889 2.4906 0.45771 3.406 1.4088 0.9154 0.95107 1.379 2.0924 1.3909 3.4239 0 1.2126-0.38043 2.2588-1.1413 3.1385l0.098834 0.090049z">
                        </path>
                    </svg>
                </form>

            </div>
            
<div id="header">
  <div id="post-nav"><a href="/wiki/">Home</a>&nbsp;»&nbsp;<a href="/wiki/#machine-learning">machine-learning</a>&nbsp;»&nbsp;<a href="/wiki/#machine-learning-recommend">recommend</a>&nbsp;»&nbsp;Notification Volume Control and Optimization System at Pinterest</div>
</div>
<div class="clearfix"></div>
<div id="title">Notification Volume Control and Optimization System at Pinterest</div>
<div id="content">
  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#_1">论文摘要</a></li>
<li><a href="#_2">相关文献</a></li>
</ul>
</div>
<h2 id="_1">论文摘要</h2>
<ul>
<li>通知系统的几个关键问题:<ul>
<li>什么时候投放</li>
<li>通过哪个通道投放</li>
<li>投放的频率和投放量</li>
</ul>
</li>
<li>挑战<ul>
<li>目标函数应该包含长期效应,不仅仅是短期效应</li>
<li>模型对容量增长的非线性效应</li>
<li>算法必须对大规模可扩展</li>
</ul>
</li>
<li>
<p>系统</p>
<ul>
<li>Weekly Notification Budget</li>
<li>Notification Service<ul>
<li>每天轮询每一个用户,决定是否给他投放,生成投放内容</li>
<li>Budget Pacer, 一个KV系统,userid做key,value是用户预算额度<ul>
<li>even pacing, 最小化用户疲劳, 比如一周预算为3, 那么就隔一天投放一次。本质上是均匀分配预算</li>
<li>更智能的pace: 周末投放更多一些?</li>
</ul>
</li>
<li>RANKER, 对于可以投放的用户, 从一系列的通知中选择最好的一个投放。ML模型在这个环节预测CTR等业务关键指标</li>
<li>delivery, 投放时间策略决定什么时候投放, 投放后跟踪用户响应反馈</li>
</ul>
</li>
<li>Volume Optimization Workflows<ul>
<li>之前的工作: 如果一个用户有很高的概率会和某种类型的通知交互,那么就给他头更高频地投放这种类型的通知<ul>
<li>如果CTR排名前10%,可以每3天发一次这种类型的push;如果20%,则延长到14天发一次; 间隔区间通过手动AB测试选择</li>
</ul>
</li>
<li>问题: 不能从指标上区分是通知质量变好带来的,还是通知的数量变多带来的?</li>
</ul>
</li>
</ul>
</li>
<li>
<p>建模概率 $(p(a|u,k_u))$, a代表这一天是否活跃, u代表某个用户, $(k_u)$代表用户的配额, 优化<br />
$$<br />
\max_{k_u} p(a|u, k_u) \<br />
s.t. \sum_{u} k_u \le K<br />
$$</p>
</li>
<li>效用建模, $(p(a|u) = p(a_o|u) + (1-p(a_o|u))p(a_n|u))$, 第二项表示用户没有通过其他途径打开APP,而是通过通知打开APP的的概率,可以近似认为是通知的效用(因为这个公式假定了不同通道之间是独立的,然而并不是这样)</li>
<li>建模长期效用<ul>
<li>将用户是否退订考虑进去,将活跃的概率分解为两部分,即退订后未来长时间的活跃概率,加上没有退订当前的活跃概率;这里将退订和不退订的活跃概率分别用不同时期的活跃概率是为了即兼顾长期利益,又能考虑短期收益,是个混血儿<br />
$$<br />
p(a|u, k_u) = p(s_{unsub}|u, k_u) p(a_L|u, k_u, s_{unsub}) + (1-p(s_{unsub}|u, k_u)) p(a|u, k_u, s_{sub})<br />
$$</li>
</ul>
</li>
<li>三个模型都是个二分类问题</li>
<li>无偏数据收集, 随机对一组用户设定投放次数,收集反馈作为数据</li>
<li>前两个模型的样本构建都没啥问题,注意构建退订模型的时候,k要选择分配的通知预算,而不是实际收到的数目,a代表活跃,而不是点击</li>
<li>第3个模型是长期活跃,作者选了第4周之后的一周是否活跃构造label</li>
<li></li>
</ul>
<h2 id="_2">相关文献</h2>
<ul>
<li>Rupesh Gupta, Guanfeng Liang, and Rómer Rosales. 2017. Optimizing Email Volume For Sitewide Engagement. In Proceedings of the 2017 ACM on Conference on Information and Knowledge Management, CIKM 2017, Singapore, November 06 - 10, 2017. 1947–1955</li>
<li>Rupesh Gupta, Guanfeng Liang, Hsiao-Ping Tseng, Ravi Kiran Holur Vijay, Xi- aoyu Chen, and Rómer Rosales. 2016. Email Volume Optimization at LinkedIn. In Proceedings of the 22nd ACM SIGKDD International Conference on Knowledge Discovery and Data Mining, San Francisco, CA, USA, August 13-17, 2016. 97–106</li>
</ul>
</div>
<div id="income">
    <!--img src="/wiki/static/images/support-qrcode.png" alt="支持我" style="max-width:300px;" /-->

    <ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-6300557868920774"
     data-ad-slot="6882414849"></ins>
</div>
<div id="content-footer">created in <span class="create-date date"> 2019-04-05 </span></div>

<div id="comments"></div>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script type="text/javascript">
const gitment = new Gitment({
  id: location.pathname,
  title: 'Notification Volume Control and Optimization System at Pinterest',
  owner: 'tracholar',
  repo: 'wiki',
  oauth: {
    client_id: '0cc0476e504b5e70ae7c',
    client_secret: 'ab98e39ef79469040057eba9c6b2b543b84c72ee',
  },
  // ...
  // For more available options, check out the documentation below
})

gitment.render('comments')
// or
// gitment.render(document.getElementById('comments'))
// or
// document.body.appendChild(gitment.render())
</script>

        </div>
        <div id="footer">
            <span>
                Copyright © 2019 tracholar.
                Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
            </span>
        </div>
        

        <script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?df74779713027375e7b79302fb72d7b0";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
        </script>


        <script src="/wiki/tipuesearch_content.js"></script>
        <script src="/wiki/static/plugin/tipuesearch/tipuesearch_set.js"></script>
        <script src="/wiki/static/plugin/tipuesearch/tipuesearch.min.js"></script>
    </body>
</html>