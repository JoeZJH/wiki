<!DOCTYPE HTML>
<html>
    <head>
        <link rel="Stylesheet" type="text/css" href="/wiki/static/css/style.css">
        <link rel="Stylesheet" type="text/css" href="/wiki/static/css/tango.css">
        <link rel="shortcut icon" href="/wiki/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/wiki/favicon.ico" type="image/x-icon">
        <title>scala语言 - tracholar's personal knowledge wiki</title>
        <meta name="keywords" content="technology, machine learning, data mining, economics, accounting"/>
        <meta name="description" content="A wiki website of tracholar when I learned new knowledgy and technics."/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width" />
        
        <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {inlineMath: [['$(',')$'], ['\\(','\\)']]}
        });
        </script>
        <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
        
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-78529611-1', 'auto');
          ga('send', 'pageview');

        </script>
    </head>

    <body>
        <div id="container">
            
<div id="header">
  <div id="post-nav"><a href="/wiki/">Home</a>&nbsp;»&nbsp;<a href="/wiki/#tools">tools</a>&nbsp;»&nbsp;scala语言</div>
</div>
<div class="clearfix"></div>
<div id="title">scala语言</div>
<div id="content">
  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#_1">基础语法与数据结构</a></li>
<li><a href="#sbt">构建工具 SBT</a></li>
<li><a href="#-int">- Int</a></li>
</ul>
</div>
<h2 id="_1">基础语法与数据结构</h2>
<ul>
<li>不变量<code>val</code>，变量<code>var</code></li>
<li>基础类型：<h2 id="-int">- Int</h2>
</li>
<li><code>def</code>创建函数，类型标签</li>
</ul>
<div class="hlcode"><pre><span class="k">def</span> <span class="n">addOne</span><span class="o">(</span><span class="n">m</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="n">m</span> <span class="o">+</span> <span class="mi">1</span>
</pre></div>


<ul>
<li>匿名函数 <code>(x:Int) =&gt; x+1</code></li>
<li>函数的部分应用</li>
</ul>
<div class="hlcode"><pre><span class="k">def</span> <span class="n">adder</span><span class="o">(</span><span class="n">m</span><span class="k">:</span><span class="kt">Int</span><span class="o">,</span> <span class="n">n</span><span class="k">:</span><span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="n">m</span> <span class="o">+</span> <span class="n">n</span>
<span class="k">val</span> <span class="n">add2</span> <span class="k">=</span> <span class="n">adder</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="k">_:</span><span class="kt">Int</span><span class="o">)</span>
</pre></div>


<ul>
<li>柯理化函数</li>
</ul>
<div class="hlcode"><pre><span class="k">def</span> <span class="n">muliply</span><span class="o">(</span><span class="n">m</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="n">m</span> <span class="o">*</span> <span class="n">n</span>
</pre></div>


<ul>
<li>可变长参数</li>
</ul>
<div class="hlcode"><pre><span class="k">def</span> <span class="n">cap</span><span class="o">(</span><span class="n">args</span> <span class="nc">String</span><span class="o">*)</span> <span class="k">=</span> <span class="o">{</span>
    <span class="n">args</span><span class="o">.</span><span class="n">map</span> <span class="o">{</span>
        <span class="n">arg</span> <span class="k">=&gt;</span> <span class="n">arg</span><span class="o">.</span><span class="n">capitalize</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<ul>
<li>类 <code>class</code></li>
<li>构造函数不是特殊的方法，他们是除了类的方法定义之外的代码。</li>
</ul>
<div class="hlcode"><pre><span class="k">class</span> <span class="nc">Calculator</span><span class="o">(</span><span class="n">brand</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span> <span class="o">{</span>
  <span class="cm">/**</span>
<span class="cm">   * A constructor.</span>
<span class="cm">   */</span>
  <span class="k">val</span> <span class="n">color</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="k">if</span> <span class="o">(</span><span class="n">brand</span> <span class="o">==</span> <span class="s">&quot;TI&quot;</span><span class="o">)</span> <span class="o">{</span>
    <span class="s">&quot;blue&quot;</span>
  <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">brand</span> <span class="o">==</span> <span class="s">&quot;HP&quot;</span><span class="o">)</span> <span class="o">{</span>
    <span class="s">&quot;black&quot;</span>
  <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
    <span class="s">&quot;white&quot;</span>
  <span class="o">}</span>

  <span class="c1">// An instance method.</span>
  <span class="k">def</span> <span class="n">add</span><span class="o">(</span><span class="n">m</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">n</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="n">m</span> <span class="o">+</span> <span class="n">n</span>
<span class="o">}</span>
</pre></div>


<ul>
<li>Scala是高度面向表达式的：大多数东西都是表达式而非指令。</li>
<li>继承</li>
</ul>
<div class="hlcode"><pre><span class="k">class</span> <span class="nc">ScientificCalculator</span><span class="o">(</span><span class="n">brand</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">Calculator</span><span class="o">(</span><span class="n">brand</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">log</span><span class="o">(</span><span class="n">m</span><span class="k">:</span> <span class="kt">Double</span><span class="o">,</span> <span class="n">base</span><span class="k">:</span> <span class="kt">Double</span><span class="o">)</span> <span class="k">=</span> <span class="n">math</span><span class="o">.</span><span class="n">log</span><span class="o">(</span><span class="n">m</span><span class="o">)</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">log</span><span class="o">(</span><span class="n">base</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>


<ul>
<li>抽象类</li>
</ul>
<div class="hlcode"><pre><span class="k">abstract</span> <span class="k">class</span> <span class="nc">Shape</span> <span class="o">{</span>
        <span class="k">def</span> <span class="n">getArea</span><span class="o">()</span><span class="k">:</span><span class="kt">Int</span>    <span class="c1">// subclass should define this</span>
<span class="o">}</span>
</pre></div>


<ul>
<li>Traits 特质
很像接口，通过<code>with</code>关键字，一个类可以扩展多个特质。</li>
</ul>
<div class="hlcode"><pre><span class="k">trait</span> <span class="nc">Car</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">brand</span><span class="k">:</span> <span class="kt">String</span>
<span class="o">}</span>

<span class="k">trait</span> <span class="nc">Shiny</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">shineRefraction</span><span class="k">:</span> <span class="kt">Int</span>
<span class="o">}</span>
<span class="k">class</span> <span class="nc">BMW</span> <span class="k">extends</span> <span class="nc">Car</span> <span class="k">with</span> <span class="nc">Shiny</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">brand</span> <span class="k">=</span> <span class="s">&quot;BMW&quot;</span>
  <span class="k">val</span> <span class="n">shineRefraction</span> <span class="k">=</span> <span class="mi">12</span>
<span class="o">}</span>
</pre></div>


<ul>
<li>泛型，方法和trait都可以引入类型参数</li>
</ul>
<div class="hlcode"><pre><span class="k">trait</span> <span class="nc">Cache</span><span class="o">[</span><span class="kt">K</span>, <span class="kt">V</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">get</span><span class="o">(</span><span class="n">key</span><span class="k">:</span> <span class="kt">K</span><span class="o">)</span><span class="k">:</span> <span class="kt">V</span>
  <span class="k">def</span> <span class="n">put</span><span class="o">(</span><span class="n">key</span><span class="k">:</span> <span class="kt">K</span><span class="o">,</span> <span class="n">value</span><span class="k">:</span> <span class="kt">V</span><span class="o">)</span>
  <span class="k">def</span> <span class="n">delete</span><span class="o">(</span><span class="n">key</span><span class="k">:</span> <span class="kt">K</span><span class="o">)</span>
<span class="o">}</span>
<span class="k">def</span> <span class="n">remove</span><span class="o">[</span><span class="kt">K</span><span class="o">](</span><span class="n">key</span><span class="k">:</span> <span class="kt">K</span><span class="o">)</span>
</pre></div>


<p>如何实现像java那样的父类占位符。</p>
<ul>
<li>apply方法</li>
</ul>
<div class="hlcode"><pre><span class="k">class</span> <span class="nc">Bar</span> <span class="o">{</span>
    <span class="k">def</span> <span class="n">apply</span><span class="o">()</span> <span class="k">=</span> <span class="mi">0</span>
<span class="o">}</span>
<span class="k">val</span> <span class="n">bar</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Bar</span>
<span class="n">bar</span><span class="o">()</span>
<span class="c1">// res: Int = 0</span>
</pre></div>


<ul>
<li>单例对象，工厂模式</li>
</ul>
<div class="hlcode"><pre><span class="k">object</span> <span class="nc">Timer</span> <span class="o">{</span>
  <span class="k">var</span> <span class="n">count</span> <span class="k">=</span> <span class="mi">0</span>

  <span class="k">def</span> <span class="n">currentCount</span><span class="o">()</span><span class="k">:</span> <span class="kt">Long</span> <span class="o">=</span> <span class="o">{</span>
    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">count</span>
  <span class="o">}</span>
<span class="o">}</span>
<span class="nc">Timer</span><span class="o">.</span><span class="n">currentCount</span><span class="o">()</span>
</pre></div>


<ul>
<li>函数即对象.
函数是一些特质的集合。具体来说，具有一个参数的函数是Function1特质的一个实例。这个特征定义了apply()语法糖，让你调用一个对象时就像你在调用一个函数。</li>
</ul>
<div class="hlcode"><pre><span class="k">object</span> <span class="nc">addOne</span> <span class="k">extends</span> <span class="nc">Function1</span><span class="o">[</span><span class="kt">Int</span>, <span class="kt">Int</span><span class="o">]</span> <span class="o">{</span>
    <span class="k">def</span> <span class="n">apply</span><span class="o">(</span><span class="n">m</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="n">m</span> <span class="o">+</span> <span class="mi">1</span>
<span class="o">}</span>
<span class="k">class</span> <span class="nc">AddOne</span> <span class="k">extends</span> <span class="o">(</span><span class="nc">Int</span> <span class="k">=&gt;</span> <span class="nc">Int</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">apply</span><span class="o">(</span><span class="n">m</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="n">m</span> <span class="o">+</span> <span class="mi">1</span>
<span class="o">}</span>
</pre></div>


<ul>
<li>包</li>
</ul>
<h2 id="sbt">构建工具 SBT</h2>
<ul>
<li>安装命令<code>brew install sbt</code></li>
<li>项目布局<ul>
<li>项目 – 项目定义文件<ul>
<li>project/build/.scala – 主项目定义文件</li>
<li>project/build.properties – 项目、sbt和Scala版本定义</li>
<li>src/main – 你的应用程序代码出现在这里，在子目录表明代码的语言（如src/main/scala, src/main/java）</li>
<li>src/main/resources – 你想要添加到jar包中的静态文件（如日志配置）</li>
<li>src/test – 就像src/main，不过是对测试</li>
<li>lib_managed – 你的项目依赖的jar文件。由sbt update时填充</li>
<li>target – 生成物的目标路径（如自动生成的thrift代码，类文件，jar包）</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div id="content-footer">created in <span class="create-date date"> 2016-07-05 </span></div>

        </div>
        <div id="footer">
            <span>
                Copyright © 2016 tracholar.
                Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
            </span>
        </div>
        
    </body>
</html>